import random
import pygame
import math
import sys

global oldMX
global circleonetoggle
global circleonesize
global circletwotoggle
global circletwosize
global circlethreetoggle
global circlethreesize
global rolldirection
global circleonehover
global circletwohover
global circlethreehover
global currentcircle
global confirmtrigger
global mx
global my
global screen

def buildsnowman():
    global oldMX
    global circleonetoggle
    global circleonesize
    global circletwotoggle
    global circletwosize
    global circlethreetoggle
    global circlethreesize
    global rolldirection
    global circleonehover
    global circletwohover
    global circlethreehover
    global currentcircle
    global confirmtrigger
    global mx
    global my

    if(oldMX != mx and circleonetoggle == True):
            circleonehover = 1080 - circleonesize/3 * 2
            if(rolldirection == True & oldMX < mx):
                circleonesize = circleonesize + 2
                if(random.randrange(1, 10) == 1):
                    rolldirection = not rolldirection
            elif(rolldirection == False & oldMX > mx):
                circleonesize = circleonesize + 2
                if(random.randrange(1, 10) == 1):
                    rolldirection = not rolldirection
        
    if(oldMX != mx and circletwotoggle == True):
        circletwohover = 1080 - circletwosize/3 * 2
        if(rolldirection == True & oldMX < mx):
            circletwosize = circletwosize + 2
            if(random.randrange(1, 10) == 1):
                rolldirection = not rolldirection
        elif(rolldirection == False & oldMX > mx):
            circletwosize = circletwosize + 2
            if(random.randrange(1, 10) == 1):
                rolldirection = not rolldirection

    if(oldMX != mx and circlethreetoggle == True):
        circlethreehover = 1080 - circlethreesize/3 * 2
        if(rolldirection == True & oldMX < mx):
            circlethreesize = circlethreesize + 2
            if(random.randrange(1, 10) == 1):
                rolldirection = not rolldirection
        elif(rolldirection == False & oldMX > mx):
            circlethreesize = circlethreesize + 2
            if(random.randrange(1, 10) == 1):
                rolldirection = not rolldirection
    oldMX = mx
        
    if confirmtrigger == True:
        if currentcircle  == 1 and 181 > circleonesize > 140:
            circleonetoggle = False
            circletwotoggle = True
            currentcircle = 2
            confirmtrigger = False
        elif currentcircle == 2 and 151 > circletwosize > 110:
            circletwotoggle = False
            circlethreetoggle = True
            currentcircle = 3
            confirmtrigger = False
        elif currentcircle == 3 and  121 > circlethreesize > 80:
            circlethreetoggle = False
            confirmtrigger = False
        else:
            reset()
            confirmtrigger = False
    return



def rendersnowman():
        if circleonetoggle == False:
            circleOne = pygame.draw.circle(screen, "white", (960,900), circleonesize, 0)
        else:
            circleBGOne = pygame.draw.circle(screen, "red", (mx,circleonehover), 240, 0)
            circleBGTwo = pygame.draw.circle(screen, "green", (mx,circleonehover), 180, 0)
            circleBGThree = pygame.draw.circle(screen, "red", (mx,circleonehover), 140, 0)
            circleOne = pygame.draw.circle(screen, "white", (mx,circleonehover), circleonesize, 0)
        if  currentcircle >= 2:
            if circletwotoggle == False:
                circleTwo = pygame.draw.circle(screen, "white", (960,700), circletwosize, 0)
            else:
                circleBGOne = pygame.draw.circle(screen, "red", (mx,circletwohover), 210, 0)
                circleBGTwo = pygame.draw.circle(screen, "green", (mx,circletwohover), 150, 0)
                circleBGThree = pygame.draw.circle(screen, "red", (mx,circletwohover), 110, 0)
                circleTwo = pygame.draw.circle(screen, "white", (mx,circletwohover), circletwosize, 0)
        if  currentcircle >= 3:
            if circlethreetoggle == False:
                circleThree = pygame.draw.circle(screen, "white", (960,520), circlethreesize, 0)
            else:
                circleBGOne = pygame.draw.circle(screen, "red", (mx,circlethreehover), 180, 0)
                circleBGTwo = pygame.draw.circle(screen, "green", (mx,circlethreehover), 120, 0)
                circleBGThree = pygame.draw.circle(screen, "red", (mx,circlethreehover), 80, 0)
                circleThree = pygame.draw.circle(screen, "white", (mx,circlethreehover), circlethreesize, 0)

def clothingchoice():
    return

def reset():
    global oldMX
    global circleonetoggle
    global circleonesize
    global circletwotoggle
    global circletwosize
    global circlethreetoggle
    global circlethreesize
    global rolldirection
    global circleonehover
    global circletwohover
    global circlethreehover
    global currentcircle
    global confirmtrigger
    global mx
    global my
    oldMX = 0
    circleonetoggle = True
    circleonesize = 30
    circletwotoggle = False
    circletwosize = 30
    circlethreetoggle = False
    circlethreesize = 30
    rolldirection = True
    circleonehover = 0
    circletwohover = 0
    circlethreehover = 0
    currentcircle = 1
    return



def main():
    global oldMX
    global circleonetoggle
    global circleonesize
    global circletwotoggle
    global circletwosize
    global circlethreetoggle
    global circlethreesize
    global rolldirection
    global circleonehover
    global circletwohover
    global circlethreehover
    global currentcircle
    global confirmtrigger
    global mx
    global my
    global screen
    oldMX = 0
    circleonetoggle = True
    circleonesize = 30
    circletwotoggle = False
    circletwosize = 30
    circlethreetoggle = False
    circlethreesize = 30
    rolldirection = True
    circleonehover = 0
    circletwohover = 0
    circlethreehover = 0
    currentcircle = 1
    confirmtrigger = False
    pygame.init()
    pygame.display.set_caption("Snowman Game")
    clock = pygame.time.Clock()
    dt = 0
    resolution = (1920, 1080)
    screen = pygame.display.set_mode(resolution)
    running = True
    while running:
        # Event Loop 
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False
            if event.type == pygame.KEYUP:
                if pressedkey[pygame.K_SPACE]:
                    confirmtrigger = True

        # Game logic
        pressedkey = pygame.key.get_pressed()
        mx, my = pygame.mouse.get_pos()
        buildsnowman()
        # Render & Display
        black = pygame.Color(0, 0, 0)
        screen.fill(black)
        imp = pygame.image.load("SMbackground.png")
        screen.blit(imp, (0, 0))
        rendersnowman()
        pygame.display.flip()
        dt = clock.tick(22)
    pygame.quit()

if __name__ == "__main__":
    main()

